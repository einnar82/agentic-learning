# WORKING_SESSION.md (Template)

> Purpose: a living log for day-to-day learning, experiments, and evolving decisions.
> This file changes often. The guardrails and ADRs change less often.
> Minimum Viable Ceremony default: complete only sections marked "Required".
> Last update (2026-02-08): added quick-start presets (including Basics), an explicit Customize path, and a root `apps/` project-placement guardrail.

## Session Mode
- Default: Minimum Viable Ceremony (MVC)
- Risk Tier: Tier 0

## Required Checklist
- [x] Date
- [x] Session Goal
- [x] Plan (max 3 tasks)
- [x] Build Log (at least one Explain -> Change -> Prove entry)
- [x] What I Can Now Explain
- [x] Next Session Plan

## Date (Required)
- 2026-02-08

## Session Goal (Required)
- Make startup selection fast for beginner tutorials with quick presets and a clear Customize path.
- Add an explicit guardrail that requires the runnable project to live under the root `apps/` directory.

## Plan (Plan-First, Required)
- Vertical slice for today: make prompt menus consistent and easy to answer in one pass, then enforce repository layout consistency.
- Tasks (small, reversible steps):
  - [x] Replace numbered group headers with named group labels + positions.
  - [x] Keep numbering only for options inside each group and add reply mapping format.
  - [x] Verify wording across startup docs and update this session log.
- Follow-up tasks (small, reversible steps):
  - [x] Add quick-start preset options for beginner use cases.
  - [x] Include an explicit Customize option that keeps full `LG-TC-DL-SM-TB` flexibility.
  - [x] Verify quick-start wording is consistent across playbook and model startup files.
  - [x] Add a guardrail in `docs/GUARDRAILS.md` that requires runnable project code under root `apps/`.
  - [x] Keep the new layout rule concrete with an `apps/my-project` example.

## Context Pack (Optional, Tier 1/2 Recommended)
- Official docs/specs:
  - 
  - 
- Key takeaways (in your words):
  - 
  - 
- Assumptions validated today:
  - 

## Decisions Pending (Optional, Use for ADR Triggers)
- Decision:
- Options:
  - A:
  - B:
- How weâ€™ll decide (evidence needed):
- Links:
  - 

## Experiments / Spikes (Optional, Timeboxed)
- Hypothesis:
- Steps:
- Result (proof):
- Decision:
- Notes:

## Build Log (Explain -> Change -> Prove, Required)
### Change 1
- Explain: The menu was ambiguous because both group labels and choices used numeric prefixes (for example, `1. Learning Goal` above `1. Understand...`).
- Change: Updated startup docs to use explicit group labels/positions and preserved numbering only for option choices in `AGENTS.md`, `docs/llm/SESSION_START.md`, `docs/llm/CODEX.md`, `docs/llm/CLAUDE.md`, and `docs/llm/CURSOR.md`.
- Prove: `rg -n "^1\\. Learning Goal$|^2\\. Topic Category$|^3\\. Depth Level$|^4\\. Session Mode$|^5\\. Timebox$" -S AGENTS.md docs/llm` returned no matches.

### Change 2
- Explain: The answer format needed an explicit mapping so learners know what each number in `1-2-3-4-2` means.
- Change: Added `Reply format: LG-TC-DL-SM-TB (example: 1-2-3-4-2)` and group position labels in startup docs.
- Prove: `rg -n "Reply format: .*LG-TC-DL-SM-TB.*|position 1|Group 1, choose one" -S AGENTS.md docs/llm` shows the new strings in all startup prompt files.

### Change 3
- Explain: The core playbook should mirror startup templates so instructions stay consistent regardless of entrypoint file.
- Change: Added the same `LG-TC-DL-SM-TB` reply format and position mapping to `docs/LEARNING_PROFESSOR_PLAYBOOK.md`.
- Prove: `rg -n "Reply format: `LG-TC-DL-SM-TB`|where positions map to:" -S docs/LEARNING_PROFESSOR_PLAYBOOK.md` returns matching lines.

### Change 4
- Explain: The top-level README needed to reflect current files and the new intake response format.
- Change: Updated `README.md` repository structure and tool usage entries, and added `LG-TC-DL-SM-TB` quick-start guidance.
- Prove: `rg -n "SESSION_START\\.md|LG-TC-DL-SM-TB|CLAUDE\\.md: root|\\.cursorrules" -S README.md` shows the new guidance and no outdated root-reference lines.

### Change 5
- Explain: A concrete example improves quick-start usability and reduces mistakes when replying with compact intake codes.
- Change: Added a short `Session intake example` line in `README.md` (`2-4-2-3-1`) with decoded meanings.
- Prove: `rg -n "Session intake example|2-4-2-3-1" -S README.md` returns both new lines.

### Change 6
- Explain: Learners asked for a faster beginner path ("basics") plus a way to customize without losing the full option model.
- Change: Added `Quick Start` presets (`2-4-1-2-1`, `1-4-1-1-1`) and `Customize your own` to `docs/LEARNING_PROFESSOR_PLAYBOOK.md`, `docs/llm/SESSION_START.md`, `docs/llm/CODEX.md`, `docs/llm/CLAUDE.md`, `docs/llm/CURSOR.md`, and documented the shortcuts in `README.md`.
- Prove: `rg -n "Quick Start \\(optional shortcuts|Basics tutorial|Basics concept lesson|Customize your own" -S docs/LEARNING_PROFESSOR_PLAYBOOK.md docs/llm README.md` returns matches in all intended files.

### Change 7
- Explain: A rendered startup reply dropped numbered options, so the intake prompt needs a presentation guard to prevent markdown list drift.
- Change: Added an explicit instruction to render the full startup options menu in a fenced code block in `AGENTS.md`, `docs/LEARNING_PROFESSOR_PLAYBOOK.md`, `docs/llm/SESSION_START.md`, `docs/llm/CODEX.md`, `docs/llm/CLAUDE.md`, and `docs/llm/CURSOR.md`.
- Prove: `rg -n "fenced code block|numbering does not drift|numbering remains stable|numbering is preserved reliably" -S AGENTS.md docs/LEARNING_PROFESSOR_PLAYBOOK.md docs/llm` returns matches in all updated files.

### Change 8
- Explain: Project files can scatter across the repository unless layout expectations are explicit.
- Change: Added `0.6 Repository Layout Guard` in `docs/GUARDRAILS.md` requiring the runnable project to be created under root `apps/` and not at repository root.
- Prove: `rg -n -F "0.6 Repository Layout Guard" docs/GUARDRAILS.md && rg -n -F "apps/my-project" docs/GUARDRAILS.md && rg -n -F "Do not place primary app code at the repository root." docs/GUARDRAILS.md` returns all new guardrail lines.

### Change 9
- Explain: The intake menu can render with missing choices, so startup docs need one canonical source and a strict "no omissions" rule.
- Change: Added a canonical fenced `text` intake menu block to `docs/LEARNING_PROFESSOR_PLAYBOOK.md` and updated `AGENTS.md` plus `docs/llm/*` startup files to reference that canonical block explicitly.
- Prove: `rg -n "Canonical Intake Menu|4\\. APIs and integrations|5\\. Security and permissions|2\\. Intermediate \\(patterns and implementation\\)|Reply format: LG-TC-DL-SM-TB" -S docs/LEARNING_PROFESSOR_PLAYBOOK.md` and `rg -n "Canonical Intake Menu\\) and do not omit any options\\." -S AGENTS.md docs/llm`.

### Change 10
- Explain: The playbook still duplicated intake options below the canonical block, which reintroduced drift risk.
- Change: Removed the repeated `### Learning Goal` through `### Timebox` lists so Section 1 keeps only the canonical intake menu plus quick-start shortcuts.
- Prove: `rg -n "^### Learning Goal|^### Topic Category|^### Depth Level|^### Session Mode|^### Timebox" -S docs/LEARNING_PROFESSOR_PLAYBOOK.md` returns no matches, while `rg -n "Canonical Intake Menu|Reply format: LG-TC-DL-SM-TB|Quick Start \\(optional shortcuts" -S docs/LEARNING_PROFESSOR_PLAYBOOK.md` returns all expected anchors.

### Change 11
- Explain: Manual checks are brittle; we need an automated guard that fails if canonical intake lines are missing or renumbered.
- Change: Added `scripts/check_canonical_intake_menu.sh` (exact-block validator), wired it to CI in `.github/workflows/canonical-intake-menu.yml`, added `.githooks/pre-commit`, and documented setup in `README.md`.
- Prove: `./scripts/check_canonical_intake_menu.sh` returns OK; `.githooks/pre-commit` runs the same check; CI workflow references the script directly.

### Change 12
- Explain: Exact-text validation was too rigid for harmless copy edits.
- Change: Switched `scripts/check_canonical_intake_menu.sh` to structural validation: required section headers in order, strict option count and sequence per section, and required reply-format line; option text is now flexible.
- Prove: `./scripts/check_canonical_intake_menu.sh` and `.githooks/pre-commit` both return OK with current docs; script now reports structure-valid result.

### Change 13
- Explain: Header matching should tolerate harmless capitalization changes while keeping structure strict.
- Change: Updated `scripts/check_canonical_intake_menu.sh` to perform case-insensitive section-header comparison (with surrounding whitespace trimmed), and documented this behavior in `README.md`.
- Prove: `./scripts/check_canonical_intake_menu.sh` and `.githooks/pre-commit` both return OK after the case-insensitive update.

### Change 14
- Explain: Workflow guidance was spread across multiple docs without one end-to-end operating reference.
- Change: Added `docs/WORKFLOW.md` as the central "how we use this workflow" guide, then cross-linked it from `README.md`, `docs/GUARDRAILS.md`, `docs/WORKING_SESSION.md`, `docs/sessions/README.md`, `docs/llm/README.md`, and `docs/LEARNING_PROFESSOR_PLAYBOOK.md`.
- Prove: `rg -n "docs/WORKFLOW.md" -S README.md docs/GUARDRAILS.md docs/WORKING_SESSION.md docs/sessions/README.md docs/llm/README.md docs/LEARNING_PROFESSOR_PLAYBOOK.md` returns references in all intended files.

### Change 15
- Explain: Model-specific startup docs still implied the playbook was the only workflow source.
- Change: Updated `docs/llm/CODEX.md`, `docs/llm/CLAUDE.md`, `docs/llm/CURSOR.md`, `docs/llm/GEMINI.md`, and `docs/llm/SESSION_START.md` to point to `docs/WORKFLOW.md` for end-to-end session operation beyond intake.
- Prove: `rg -n "docs/WORKFLOW.md" -S docs/llm/CODEX.md docs/llm/CLAUDE.md docs/llm/CURSOR.md docs/llm/GEMINI.md docs/llm/SESSION_START.md` returns matches in all files.

### Change 16
- Explain: Startup-first routing should remain primary, but the post-intake path to workflow execution needed to be explicit in `AGENTS.md`.
- Change: Added `After intake selection, follow \`docs/WORKFLOW.md\` for end-to-end execution.` directly under the intake reply-format rule in `AGENTS.md`.
- Prove: `rg -n "After intake selection, follow `docs/WORKFLOW.md` for end-to-end execution\\." -S AGENTS.md` returns the new line.

### Change 17
- Explain: Model entrypoint docs needed exact wording parity with `AGENTS.md` for post-intake workflow handoff.
- Change: Added `After intake selection, follow \`docs/WORKFLOW.md\` for end-to-end execution.` in `docs/llm/CODEX.md`, `docs/llm/CLAUDE.md`, `docs/llm/CURSOR.md`, and `docs/llm/GEMINI.md`.
- Prove: `rg -n "After intake selection, follow `docs/WORKFLOW.md` for end-to-end execution\\." -S docs/llm/CODEX.md docs/llm/CLAUDE.md docs/llm/CURSOR.md docs/llm/GEMINI.md` returns matches in all four files.

### Change 18
- Explain: We decided to keep exact sentence parity across all enforced entrypoints (`AGENTS.md` and `docs/llm/*.md`) while allowing equivalent wording in guide docs.
- Change: Updated `docs/llm/SESSION_START.md` to use the same exact sentence: `After intake selection, follow \`docs/WORKFLOW.md\` for end-to-end execution.`
- Prove: `rg -n "After intake selection, follow `docs/WORKFLOW.md` for end-to-end execution\\." -S AGENTS.md docs/llm/CODEX.md docs/llm/CLAUDE.md docs/llm/CURSOR.md docs/llm/GEMINI.md docs/llm/SESSION_START.md` returns matches in all enforced entrypoint files.

### Change 19
- Explain: Python beginner sessions needed a first-class intake category so "basics" presets map to a relevant topic instead of APIs.
- Change: Added `9. Programming language fundamentals (Python/JavaScript/etc.)` to the canonical Topic Category menu in `docs/LEARNING_PROFESSOR_PLAYBOOK.md`, added a matching topic track, updated quick-start presets in `docs/LEARNING_PROFESSOR_PLAYBOOK.md` and `README.md`, and updated `scripts/check_canonical_intake_menu.sh` Topic Category option count from `8` to `9`.
- Prove: `./scripts/check_canonical_intake_menu.sh` returns OK; `rg -n "Programming language fundamentals|2-9-1-2-1|1-9-1-1-1|section_option_counts=\\(5 9 4 5 3\\)" -S docs/LEARNING_PROFESSOR_PLAYBOOK.md README.md scripts/check_canonical_intake_menu.sh` returns all expected matches.

### Change 20
- Explain: Intake remained confusing because learners could still lose group-position mapping while scanning the menu.
- Change: Clarified canonical section headers with inline position tags (`LG/TC/DL/SM/TB`) in `docs/LEARNING_PROFESSOR_PLAYBOOK.md`, added an explicit numbering note, and updated `scripts/check_canonical_intake_menu.sh` to allow section headers with optional parenthetical metadata.
- Prove: `./scripts/check_canonical_intake_menu.sh` returns OK after the header-format update; `rg -n "Learning Goal \\(LG / position 1\\)|Topic Category \\(TC / position 2\\)|Group labels are unnumbered" -S docs/LEARNING_PROFESSOR_PLAYBOOK.md` returns the new menu clarity lines.

## Bugs / Debugging (Optional)
- Error:
- Repro:
- Hypothesis:
- Fix:
- Regression guard (test/check):

## What I Can Now Explain (Teach-back, Required)
- Why duplicate numbering (group and option both numeric) creates selection ambiguity.
- How to design menu prompts with position mapping while keeping option numbering readable.
- How to verify prompt consistency quickly with `rg`.
- How quick presets can speed intake while preserving full customization through `LG-TC-DL-SM-TB`.
- How rendering instructions (code block vs markdown list) affect option integrity in startup menus.
- How explicit repository layout guardrails prevent project sprawl and reduce ambiguity.
- How to enforce a simple placement contract (`apps/<project-name>`) with minimal process overhead.

## Next Session Plan (Required)
- Run one fresh-session dry run using both paths: pick a quick preset and then try a fully customized response.
- Confirm the menu always displays all options when rendered as a fenced block.
- Add a short scaffold note in startup docs that points to `apps/<project-name>` when creating a new project.
- Validate the same path convention appears in README onboarding text.
